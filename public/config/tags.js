const DEFAULT_REGEX = {
    number: /(\d+)/i,
    size: /((?:\d+(.\d+)?)(?:px|em|%|cm|rem|pt)\s*)+/i,
    position: /((\d+)(px|em|%|cm|rem|pt)|0)/i,
    color: /#((?:[\d|a-f|A-F]{3}){1,2})/i,
    text: /(.*?)/i,
    link: /(.*)/i,
    text_align: /(left|right|justify|center)/i,
    align: /(left|right|center)/i,
    variant: /(small-caps|normal|initial|inherit)/i,
    float: /(1.0+|0.\d+)/i,
    degree: /((?:\d+))+/i,
};
const DEFAULT_PROPERTIES = {
    class: ["class", "", DEFAULT_REGEX["text"]],
    // DIMENSIONS
    width: ["style", "width:", DEFAULT_REGEX["size"]],
    size: ["style", "width:", DEFAULT_REGEX["size"]],
    height: ["style", "height:", DEFAULT_REGEX["size"]],
    zIndex: ["style", "z-index:", /\d+/],
    // STYLING
    bg: ["style", "background-color:", DEFAULT_REGEX["color"]],
    color: ["style", "background-color:", DEFAULT_REGEX["color"]],
    radius: ["style", "border-radius:", DEFAULT_REGEX["size"]],
    border: ["style", "border:", DEFAULT_REGEX["text"]],
    rotate: ["style", "transform: rotate(", DEFAULT_REGEX["text"], "deg)"],
    // FONT
    fg: ["style", "color:", DEFAULT_REGEX["color"]],
    "font-color": ["style", "color:", DEFAULT_REGEX["color"]],
    "font-size": ["style", "font-size:", DEFAULT_REGEX["size"]],
    "font-family": ["style", "font-family:", DEFAULT_REGEX["text"]],
    ff: ["style", "font-family:", DEFAULT_REGEX["text"]],
    "text-align": ["style", "text-align:", DEFAULT_REGEX["text_align"]],
    // POSITIONING
    align: ["style", "float:", DEFAULT_REGEX["align"]],
    position: ["style", "position:", /(relative|absolute|fixed)/i],
    top: ["style", "top:", DEFAULT_REGEX["position"]],
    bottom: ["style", "bottom:", DEFAULT_REGEX["position"]],
    left: ["style", "left:", DEFAULT_REGEX["position"]],
    right: ["style", "right:", DEFAULT_REGEX["position"]],
    margin: ["style", "margin:", DEFAULT_REGEX["size"]],
    "margin-top": ["style", "margin-top:", DEFAULT_REGEX["size"]],
    "margin-bottom": ["style", "margin-bottom:", DEFAULT_REGEX["size"]],
    "margin-left": ["style", "margin-left:", DEFAULT_REGEX["size"]],
    "margin-right": ["style", "margin-right:", DEFAULT_REGEX["size"]],
    mt: ["style", "margin-top:", DEFAULT_REGEX["size"]],
    mb: ["style", "margin-bottom:", DEFAULT_REGEX["size"]],
    ml: ["style", "margin-left:", DEFAULT_REGEX["size"]],
    mr: ["style", "margin-right:", DEFAULT_REGEX["size"]],
    padding: ["style", "padding:", DEFAULT_REGEX["size"]],
    "padding-top": ["style", "padding-top:", DEFAULT_REGEX["size"]],
    "padding-bottom": ["style", "padding-bottom:", DEFAULT_REGEX["size"]],
    "padding-left": ["style", "padding-left:", DEFAULT_REGEX["size"]],
    "padding-right": ["style", "padding-right:", DEFAULT_REGEX["size"]],
    pd: ["style", "padding-top:", DEFAULT_REGEX["size"]],
    pb: ["style", "padding-bottom:", DEFAULT_REGEX["size"]],
    pl: ["style", "padding-left:", DEFAULT_REGEX["size"]],
    pr: ["style", "padding-right:", DEFAULT_REGEX["size"]],
};
const theme_keywords = [
    'phb24',
    'phb', 'dmg', 'witch', 'xgte', 'tcoe', 'dia', 'toa', 'wmm', 'wdh', 'ee',
    'mtof', 'draco', 'curator', 'brs'
];
export const SP_KEYWORDS = {
    theme: '--theme-keyword'
};
const exclusive_themes = {
    keywords: theme_keywords,
    default: SP_KEYWORDS.theme
};
export const BBCODE_TAGS = {
    part: {
        tag: "div",
        exclusive_keywords: [exclusive_themes],
        keywords: {},
        params: {
            margin: DEFAULT_PROPERTIES["margin"],
            "margin-top": DEFAULT_PROPERTIES["margin-top"],
            "margin-bottom": DEFAULT_PROPERTIES["margin-bottom"],
            "margin-left": DEFAULT_PROPERTIES["margin-left"],
            "margin-right": DEFAULT_PROPERTIES["margin-right"],
        },
        auto_params: {
            class: "part wide",
        },
    },
    pagedecoration: {
        tag: "div",
        full_tag: false,
        regex: {
            "<div class='pagedecoration $1'></div>": /\[pagedecoration (.*?)\]/gi,
        }
    },
    chapter: {
        tag: "div",
        add_start: '\n',
        add_end: '\n',
        exclusive_keywords: [exclusive_themes],
        params: {
            title: ["style", "--chapter-number:'", DEFAULT_REGEX["text"], "'"],
            prefix: ["style", "--chapter-number:'", DEFAULT_REGEX["text"], " ' counter(number-of-chapter)"],
            colored: ["style", "--colored:", DEFAULT_REGEX["color"]],
            decoration: ["class", "decoration v", DEFAULT_REGEX["text"]],
            margin: DEFAULT_PROPERTIES["margin"],
            "margin-top": DEFAULT_PROPERTIES["margin-top"],
            "margin-bottom": DEFAULT_PROPERTIES["margin-bottom"],
            "margin-left": DEFAULT_PROPERTIES["margin-left"],
            "margin-right": DEFAULT_PROPERTIES["margin-right"],
            mt: DEFAULT_PROPERTIES["mt"],
            mb: DEFAULT_PROPERTIES["mb"],
            ml: DEFAULT_PROPERTIES["ml"],
            mr: DEFAULT_PROPERTIES["mr"],
        },
        keywords: {
            witch: ["class", "witch"],
            xgte: ["class", "xgte"],
            dia: ["class", "dia"],
            toa: ["class", "toa"],
            decoration: ["class", "decoration"],
        },
        auto_params: {
            class: "chapter wide",
            style: `--chapter-number: 'Chapter ' counter(number-of-chapter)`,
        },
    },
    stroke: {
        full_tag: true,
        regex: {
            "<div style='-webkit-text-stroke:$1 #$3; position:relative'>$4<span class='text-stroke'>$4</span></div>": /\[(?:stroke|s) ((?:\d+(.\d+)?)(?:px|em|%|pt|rem)\s*)+ #((?:[\d|a-f|A-F]{3}){1,2})\](.*?)\[\/(?:stroke|s)\]/gi,
            "<div style='-webkit-text-stroke:$3 #$1; position:relative'>$4<span class='text-stroke'>$4</span></div>": /\[(?:stroke|s) #((?:[\d|a-f|A-F]{3}){1,2}) ((?:\d+(.\d+)?)(?:px|em|%|pt|rem)\s*)+\](.*?)\[\/(?:stroke|s)\]/gi,
            "<div style='-webkit-text-stroke:$1 #000; position:relative'>$3<span class='text-stroke'>$3</span></div>": /\[(?:stroke|s) ((?:\d+(.\d+)?)(?:px|em|%|pt|rem)\s*)+\]([^\n]*?)\[\/(?:stroke|s)\]/gi,
        },
    },
    // Stroke Alias
    s: {
        alias: "stroke",
    },
    p: {
        tag: "p",
        params: {
            color: DEFAULT_PROPERTIES["fg"],
            size: DEFAULT_PROPERTIES["font-size"],
            bg: DEFAULT_PROPERTIES["bg"],
            transform: ["style", "font-variant:", DEFAULT_REGEX["variant"]],
        },
        keywords: {
            center: ["style", "text-align: center"],
            left: ["style", "text-align: left"],
            right: ["style", "text-align: right"],
            justify: ["style", "text-align: justify"],
            smallcaps: ["style", "font-variant: small-caps"],
            italic: ["style", "font-style: italic"],
            bold: ["style", "font-weight: bold"],
        },
    },
    text: {
        tag: "span",
        params: {
            color: DEFAULT_PROPERTIES["fg"],
            size: DEFAULT_PROPERTIES["font-size"],
            font: DEFAULT_PROPERTIES["font-family"],
            bg: DEFAULT_PROPERTIES["bg"],
            transform: ["style", "font-variant:", DEFAULT_REGEX["variant"]],
        },
        keywords: {
            smallcaps: ["style", "font-variant: small-caps"],
            italic: ["style", "font-style: italic"],
            bold: ["style", "font-weight: bold"],
        },
    },
    t: { alias: "text" },
    url: {
        full_tag: true,
        regex: {
            "<a href='$1' title='$1'>$2</a>": /\[url link=(.*?)\](.*?)\[\/url\]/gi,
            "<a href='http://$1' title='$1'>$1</a>": /\[url](.*?)\[\/url]/gi,
        },
    },
    goto: {
        full_tag: true,
        regex: {
            "<a href='$1' title='$1'>$2</a>": /\[goto (.*?)\](.*?)\[\/goto\]/gi,
        },
    },
    link: {
        full_tag: true,
        regex: {
            "<a href='$1' title='$1'>$2</a>": /\[link (.*?)\](.*?)\[\/link\]/gi,
        },
    },
    color: {
        full_tag: false,
        regex: {
            "<span style='color:#$1'>": /\[color #([\da-f]+)\]/gi,
        },
    },
    i: {
        tag: 'i',
        keywords: {}
    },
    image: {
        tag: "img",
        self_closing: true,
        params: {
            src: ["src", "", DEFAULT_REGEX["text"]],
            link: ["src", "", DEFAULT_REGEX["text"]],
            opacity: ["style", "opacity:", DEFAULT_REGEX["float"]],
            width: DEFAULT_PROPERTIES["width"],
            size: DEFAULT_PROPERTIES["width"],
            height: DEFAULT_PROPERTIES["height"],
            align: DEFAULT_PROPERTIES["align"],
            position: DEFAULT_PROPERTIES["position"],
            top: DEFAULT_PROPERTIES["top"],
            bottom: DEFAULT_PROPERTIES["bottom"],
            left: DEFAULT_PROPERTIES["left"],
            right: DEFAULT_PROPERTIES["right"],
            class: DEFAULT_PROPERTIES["class"],
            zIndex: DEFAULT_PROPERTIES["z-index"],
            padding: DEFAULT_PROPERTIES["padding"],
            "padding-top": DEFAULT_PROPERTIES["padding-top"],
            "padding-bottom": DEFAULT_PROPERTIES["padding-bottom"],
            "padding-left": DEFAULT_PROPERTIES["padding-left"],
            "padding-right": DEFAULT_PROPERTIES["padding-right"],
            margin: DEFAULT_PROPERTIES["margin"],
            "margin-top": DEFAULT_PROPERTIES["margin-top"],
            "margin-bottom": DEFAULT_PROPERTIES["margin-bottom"],
            "margin-left": DEFAULT_PROPERTIES["margin-left"],
            "margin-right": DEFAULT_PROPERTIES["margin-right"],
        },
        keywords: {
            left: ["style", "float: left"],
            right: ["style", "float: right"],
            multiply: ["style", "mix-blend-mode: multiply"],
            absolute: ["style", "position:absolute"],
            front: ["style", "z-index:1"],
        },
    },
    watercolor: {
        tag: "div",
        add_start: '<div class="wc-container">',
        add_end: "</div>",
        params: {
            mask: [
                "style",
                "--wc-mask: url('https://junthor.github.io/styles/watercolor/",
                DEFAULT_REGEX["text"],
                ".png'), var(--reverse-mask)",
            ],
            link: [
                "style",
                "--wc-mask: url('",
                DEFAULT_REGEX["text"],
                ")', var(--reverse-mask)",
            ],
            size: ["style", "--wc-size:", DEFAULT_REGEX["size"]],
            bg: DEFAULT_PROPERTIES["bg"],
            color: DEFAULT_PROPERTIES["bg"],
            x: ["style", "--wc-x:", DEFAULT_REGEX["size"]],
            y: ["style", "--wc-y: ", DEFAULT_REGEX["size"]],
            zIndex: DEFAULT_PROPERTIES["z-index"],
            opacity: ["style", "opacity:", DEFAULT_REGEX["float"]],
        },
        keywords: {
            top: ["class", "top"],
            right: ["class", "right"],
            tl: ["class", "top"],
            br: ["class", "right"],
            tr: ["class", "top right"],
            front: ["style", "z-index: 2"],
            reverse: ["class", "reverse"],
        },
        auto_params: {
            class: "watercolor",
        },
    },
    caption: {
        tag: "div",
        params: DEFAULT_PROPERTIES,
        keywords: {
            absolute: ["style", "position:absolute"],
        },
        auto_params: {
            class: "caption",
        },
    },
    block: {
        tag: "div",
        params: DEFAULT_PROPERTIES,
        keywords: {
            left: ["style", "float: left"],
            right: ["style", "float: right"],
            multiply: ["style", "mix-blend-mode: multiply"],
            absolute: ["style", "position:absolute"],
            wide: ["class", "wide"],
        },
    },
    note: {
        tag: "div",
        add_start: "\n",
        params: {
            fs: ["style", "font-size:", DEFAULT_REGEX["size"]],
            fg: DEFAULT_PROPERTIES["font-color"],
            bg: DEFAULT_PROPERTIES["bg"],
        },
        keywords: {
            wide: ["class", "wide"],
        },
        auto_params: {
            class: "note",
        },
    },
    annotate: {
        tag: "div",
        add_start: "<div class='annotation-number'></div><div class='annotation-content'>",
        add_end: "</div>",
        params: {
            text: ["style", "--text:'", DEFAULT_REGEX["text"], "'"],
        },
        keywords: {
            highlight: ["class", "highlight"],
        },
        auto_params: {
            class: "annotate",
        },
    },
    description: {
        tag: "div",
        add_start: "\n",
        params: {
            fs: ["style", "font-size:", DEFAULT_REGEX["size"]],
            fg: DEFAULT_PROPERTIES["font-color"],
            bg: ["style", "--description-color:", DEFAULT_REGEX["color"]],
        },
        keywords: {
            wide: ["class", "wide"],
        },
        auto_params: {
            class: "description",
        },
    },
    frame: {
        tag: "div",
        add_start: "\n",
        add_end: "\n",
        params: DEFAULT_PROPERTIES,
        keywords: {
            left: ["style", "float: left"],
            right: ["style", "float: right"],
            multiply: ["style", "mix-blend-mode: multiply"],
            absolute: ["style", "position:absolute"],
            wide: ["class", "wide"],
            simple: ["class", "simple"],
            small: ["class", "small"],
            card: ["class", "card"],
            decoration: ["class", "decoration"],
            top: ["class", "top"],
            bottom: ["class", "bottom"],
            h: ["class", "horizontal"],
        },
        auto_params: {
            class: "frame",
        },
    },
    monster: {
        tag: "div",
        add_start: "\n",
        add_end: "\n",
        params: DEFAULT_PROPERTIES,
        keywords: {
            wide: ["class", "wide"],
            brs: ["class", "brs"],
            classic: ["class", "classic"],
            noframe: ["class", "noframe"],
            unframe: ["class", "noframe"],
        },
        auto_params: {
            class: "monster",
        },
    },
    lexicon: {
        regex: {
            "<div class='lexicon-letter'>$1</div>": /\[lexicon (.*?)\]/gi,
        },
    },
    columns: {
        tag: "div",
        add_start: "\n",
        add_end: "\n",
        params: {
            n: ["style", "columns:", DEFAULT_REGEX["number"]],
            gap: ["style", "column-gap:", DEFAULT_REGEX["size"]],
            size: DEFAULT_PROPERTIES["font-size"],
            font: DEFAULT_PROPERTIES["font-family"],
            ff: DEFAULT_PROPERTIES["font-family"],
            margin: DEFAULT_PROPERTIES["margin"],
            "margin-top": DEFAULT_PROPERTIES["margin-top"],
            "margin-bottom": DEFAULT_PROPERTIES["margin-bottom"],
            "margin-left": DEFAULT_PROPERTIES["margin-left"],
            "margin-right": DEFAULT_PROPERTIES["margin-right"],
            mt: DEFAULT_PROPERTIES["mt"],
            mb: DEFAULT_PROPERTIES["mb"],
            ml: DEFAULT_PROPERTIES["ml"],
            mr: DEFAULT_PROPERTIES["mr"],
            padding: DEFAULT_PROPERTIES["padding"],
            "padding-top": DEFAULT_PROPERTIES["padding-top"],
            "padding-bottom": DEFAULT_PROPERTIES["padding-bottom"],
            "padding-left": DEFAULT_PROPERTIES["padding-left"],
            "padding-right": DEFAULT_PROPERTIES["padding-right"],
            pt: DEFAULT_PROPERTIES["pt"],
            pb: DEFAULT_PROPERTIES["pb"],
            pl: DEFAULT_PROPERTIES["pl"],
            pr: DEFAULT_PROPERTIES["pr"],
        },
        keywords: {
            wide: ["class", "wide"],
            2: ["style", "columns:2"],
            3: ["style", "columns:3"],
        },
        auto_params: {
            class: "column",
        },
    },
    banner: {
        tag: "div",
        params: {},
        keywords: {
            simple: ["class", "simple"],
            ribbon: ["class", "ribbon"],
            noshadow: ["style", "filter: none"],
        },
        auto_params: { class: "banner" },
    },
    footer: {
        tag: "div",
        exclusive_keywords: [exclusive_themes],
        add_start: '<div class="footnote">',
        add_end: "</div>",
        params: {
            fg: DEFAULT_PROPERTIES["fg"],
            number: ["style", "--footer-number: '", /\d+/, "'"],
            letter: ["style", "--letter: '", /\w/, "'"],
        },
        keywords: {
            number: ["style", "--footer-number: counter(number-of-page)"],
            hide: ["style", "background:none"],
            phb: ["class", "phb"],
            draco: ["class", "draco"],
            xgte: ["class", "xgte"],
            ee: ["class", "ee"],
            mtof: ["class", "mtof"],
            dmg: ["class", "dmg"],
            curator: ["class", "curator"],
        },
        auto_params: { class: "footer" },
    },
    vspace: {
        full_tag: false,
        regex: {
            "<div style='height:$1'></div>": /\[(?:vspace|vs) ((?:\d+(.\d+)?)(?:px|em|%|cm|pt|rem)\s*)+\]/gi,
        },
    },
    vs: { alias: "vspace" },
    hspace: {
        full_tag: false,
        regex: {
            "<div style='display:inline-block;width:$1'></div>": /\[(?:hspace|hs) ((?:\d+(.\d+)?)(?:px|em|%|cm|pt|rem)\s*)+\]/gi,
        },
    },
    hs: { alias: "hspace" },
    toc: {
        tag: 'div',
        keywords: {
            1: ['style', "column-count: 1"],
            2: ['style', "column-count: 2"],
            3: ['style', "column-count: 3"],
            4: ['style', "column-count: 4"],
            5: ['style', "column-count: 5"],
        },
        auto_params: {
            'class': 'toc'
        }
    }
};
export const BBCODE_TAGS_STATIC = {
    "[toc]": "<div class='toc'>",
    "[/toc]": "</div>",
    "[cover]": "<div class='cover wide'>",
    "[/cover]": "</div>",
    "[cover inside]": "<div class='cover wide inside'>",
    "[h1]": "<h1>",
    "[/h1]": "</h1>",
    "[h2]": "<h2>",
    "[/h2]": "</h2>",
    "[h3]": "<h3>",
    "[/h3]": "</h3>",
    "[cover back]": "<div class='back-cover'>",
    "[wide]": '<div class="wide">',
    "[/wide]": "</div>",
    "[newcolumn]": '<div style="display:inline-block"></div><div class="column-break"></div>',
    "[nextcolumn]": '<div style="display:inline-block"></div><div class="column-break"></div>',
    "[columnbreak]": '<div style="display:inline-block"></div><div class="column-break"></div>',
    "[/monster]": "</div>",
    "[left]": '<p style="text-align:left;">',
    "[/left]": "</p>",
    "[right]": '<p style="text-align:right;">',
    "[/right]": "</p>",
    "[center]": '<p style="text-align:center;">',
    "[/center]": "</p>",
    "[justify]": '<p style="text-align:justify;">',
    "[/justify]": "</p>",
    "[b]": "<strong>",
    "[/b]": "</strong>",
    "[i]": "<i>",
    "[/i]": "</i>",
    "[u]": "<u>",
    "[/u]": "</u>",
    "[break]": "<br>",
    "[br]": "<br>",
    "[newline]": "<br>",
    "[nl]": "<br>",
    "[big]": '<span style="font-size: 125%">',
    "[/big]": "</span>",
    "[small]": '<span style="font-size: 80%">',
    "[/small]": "</span>",
    "[code]": "<code>",
    "[/code]": "</code>",
    "[pre]": "<pre>",
    "[/pre]": "</pre>",
    "[quote]": "<blockquote>",
    "[/quote]": "</blockquote>",
    "[note]": "<div class='note'>\n",
    "[/note]": "</div>",
    "[description]": "<div class='description'>\n",
    "[/description]": "</div>",
    "[separator diamond]": "<img src='./styles/diamond_title.svg' class='cover-diamond' />",
    "[hspace]": "<div style='width:1em; display: inline-block'></div>",
    "[hs]": "<div style='width:1em; display: inline-block'></div>",
    "[vspace]": "<div style='height:1em;'></div>",
    "[vs]": "<div style='height:1em;'></div>",
};
